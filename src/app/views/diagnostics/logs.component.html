<div>

  <div class="row">
    <div class="col-6 col-lg-3">
      <div class="card">
        <div class="card-body p-0 clearfix">
          <i class="fa fa-calendar bg-info p-4 font-2xl mr-3 float-left"></i>
          <div class="h5 text-info mb-0 pt-3">
              <input type="text" placeholder="Showing dates" class="widget-range" bsDaterangepicker [bsConfig]="bsConfig" [bsValue]="bsValue"
              [(ngModel)]="bsValue" (ngModelChange)="getApplications()" />
          </div>
          <div class="text-muted text-uppercase font-weight-bold font-xs">Range</div>
        </div>
      </div>
    </div>
    <!--/.col-->
    <div class="col-6 col-lg-3">
      <div class="card">
        <div class="card-body p-0 clearfix">
          <i class="fa fa-bug bg-danger p-4 font-2xl mr-3 float-left"></i>
          <div class="h5 text-danger mb-0 pt-3">{{errorCount}}</div>
          <div class="text-muted text-uppercase font-weight-bold font-xs">Errors</div>
        </div>
      </div>
    </div>
    <!--/.col-->
    <div class="col-6 col-lg-3">
      <div class="card">
        <div class="card-body p-0 clearfix">
          <i class="fa fa-warning bg-warning p-4 font-2xl mr-3 float-left"></i>
          <div class="h5 text-warning mb-0 pt-3">{{warningCount}}</div>
          <div class="text-muted text-uppercase font-weight-bold font-xs">Warnings</div>
        </div>
      </div>
    </div>
    <!--/.col-->
    <div class="col-6 col-lg-3">
      <div class="card">
        <div class="card-body p-0 clearfix">
          <i class="fa fa-info bg-success p-4 font-2xl mr-3 float-left"></i>
          <div class="h5 text-info mb-0 pt-3">{{statsCount}}</div>
          <div class="text-muted text-uppercase font-weight-bold font-xs">Stats</div>
        </div>
      </div>
    </div>
  </div>



  <div *ngFor="let item of (apps | async)">
    <div class="row">
      <div class="col-lg-12">
        <div class="card" [ngClass]="{
            'card-accent-success': currentLogData(item).level === 'Stats',
            'card-accent-danger': currentLogData(item).level === 'Error',
            'card-accent-warning': currentLogData(item).level === 'Warning',
            'card-accent-secondary': currentLogData(item).level !== 'Stats' && currentLogData(item).level !== 'Error' && currentLogData(item).level !== 'Warning'}">
          <div class="card-header">
            <table class="card-table">
              <tr>
                <td class="td-icon">
                  <i class="fa fa-align-justify"></i>
                </td>
                <td class="td-title">{{item.application}}</td>
                <td class="td-level">
                  <div class="btn-group float-right" dropdown [isDisabled]="item.levels.length == 1">
                    <button dropdownToggle type="button" class="btn dropdown-toggle" [ngClass]="{
                                  'btn-success': currentLogData(item).level === 'Stats',
                                  'btn-danger': currentLogData(item).level === 'Error',
                                  'btn-warning': currentLogData(item).level === 'Warning',
                                  'btn-secondary': currentLogData(item).level !== 'Stats' && currentLogData(item).level !== 'Error' && currentLogData(item).level !== 'Warning'}">
                      {{currentLogData(item).level}}
                      <span class="caret"></span>
                    </button>
                    <ul *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu">
                      <li role="menuitem" *ngFor="let level of item.levels">
                        <a class="dropdown-item" (click)="changeLevel(item, level.name)">{{level.name}}</a>
                      </li>
                    </ul>
                  </div>
                </td>
              </tr>
            </table>
          </div>
          <div class="card-body">
            <table class="table table-sm table-striped table-log">
              <thead>
                <tr>
                  <th style="width: 100px">Timestamp</th>
                  <th style="width: 100px">Type</th>
                  <th style="width: max-content;">Message</th>
                  <th style="width: 100px">Machine</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let dataItem of currentLogData(item).unwrappedData?.data">
                  <td>{{dataItem.timestamp | date:'short'}}</td>
                  <td>{{dataItem.type}}</td>
                  <td class="breakWord">{{dataItem.message}}</td>
                  <td>{{dataItem.machine}}</td>
                </tr>
              </tbody>
            </table>
            <ul class="pagination" *ngIf="currentLogData(item).unwrappedData?.totalPages > 1">
              <li class="page-item">
                <a class="page-link" (click)="goToPage(item, currentLogData(item).unwrappedData?.pageNumber - 1)">Prev</a>
              </li>
              <li *ngFor="let i of currentLogData(item).totalPagesArray" class="page-item" [ngClass]="{ 'active' : i == currentLogData(item).unwrappedData?.pageNumber }">
                <a class="page-link" (click)="goToPage(item, i)">{{i+1}}</a>
              </li>
              <li class="page-item">
                <a class="page-link" (click)="goToPage(item, currentLogData(item).unwrappedData?.pageNumber + 1)">Next</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="row">&nbsp;</div>
  </div>
</div>
